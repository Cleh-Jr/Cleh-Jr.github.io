<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minha Biblioteca de Jogos</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .game-card:hover .overlay { opacity: 1; }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #1a202c; }
        ::-webkit-scrollbar-thumb { background: #4a5568; border-radius: 4px; }
        .modal-enter-active, .modal-leave-active { transition: opacity 0.3s ease; }
        .modal-enter-from, .modal-leave-to { opacity: 0; }
    </style>
</head>
<body class="bg-gray-900 text-gray-100 font-sans">
    <div id="app" class="container mx-auto px-4 py-8">
        <header class="mb-12 text-center">
            <h1 class="text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-500 mb-2">
                GAME LIBRARY
            </h1>
            <p class="text-gray-400">Total de {{ games.length }} jogos em todas as plataformas</p>
        </header>

        <div class="mb-8 max-w-md mx-auto">
            <input v-model="search" type="text" placeholder="Buscar jogo..." 
                   class="w-full bg-gray-800 border border-gray-700 rounded-full px-6 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500">
        </div>

        <div v-for="(group, store) in groupedGames" :key="store" class="mb-6">
            <button @click="toggleStore(store)" 
                    class="w-full flex items-center justify-between bg-gray-800 p-4 rounded-lg hover:bg-gray-700 transition shadow-lg">
                <span class="text-xl font-bold flex items-center">
                    <i :class="getStoreIcon(store)" class="mr-3 text-blue-400"></i>
                    {{ store }} <span class="ml-3 text-sm font-normal text-gray-500">({{ group.length }} jogos)</span>
                </span>
                <i :class="expandedStores[store] ? 'fa-chevron-up' : 'fa-chevron-down'" class="fas"></i>
            </button>

            <div v-show="expandedStores[store]" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4 mt-4 p-2">
                <div v-for="game in filteredGroup(group)" :key="game.Id" 
                     @click="openDetails(game)"
                     class="game-card relative group cursor-pointer rounded-lg overflow-hidden shadow-md transform hover:scale-105 transition duration-300">
                    <img :src="getCover(game)" :alt="game.Nome" class="w-full h-64 object-cover bg-gray-800">
                    <div class="overlay absolute inset-0 bg-black bg-opacity-60 opacity-0 flex flex-col justify-end p-3 transition-opacity">
                        <p class="text-sm font-bold truncate">{{ game.Nome }}</p>
                        <p class="text-xs text-blue-300">{{ game.Gêneros }}</p>
                    </div>
                </div>
            </div>
        </div>

        <transition name="modal">
            <div v-if="selectedGame" class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-90">
                <div class="bg-gray-800 w-full max-w-4xl max-h-[90vh] overflow-y-auto rounded-2xl shadow-2xl relative">
                    <button @click="selectedGame = null" class="absolute top-4 right-4 text-3xl text-gray-400 hover:text-white z-10">&times;</button>
                    
                    <div class="relative h-64 w-full">
                        <img :src="getBanner(selectedGame)" class="w-full h-full object-cover opacity-40">
                        <div class="absolute bottom-0 left-0 p-8 w-full bg-gradient-to-t from-gray-800">
                            <h2 class="text-4xl font-black">{{ selectedGame.Nome }}</h2>
                            <p class="text-blue-400 font-bold">{{ selectedGame.Fontes }} | {{ selectedGame.Plataformas }}</p>
                        </div>
                    </div>

                    <div class="p-8 grid grid-cols-1 md:grid-cols-3 gap-8">
                        <div class="space-y-4">
                            <div class="bg-gray-700 p-4 rounded-xl">
                                <p class="text-xs text-gray-400 uppercase">Lançamento</p>
                                <p class="font-bold">{{ selectedGame['Data de lançamento'] || 'N/A' }}</p>
                            </div>
                            <div class="bg-gray-700 p-4 rounded-xl flex justify-between">
                                <div>
                                    <p class="text-xs text-gray-400 uppercase">Metascore</p>
                                    <p class="text-2xl font-black text-green-400">{{ selectedGame['Avaliação da crítica'] || '--' }}</p>
                                </div>
                                <div>
                                    <p class="text-xs text-gray-400 uppercase">User Score</p>
                                    <p class="text-2xl font-black text-blue-400">{{ selectedGame['Avaliação da comunidade'] || '--' }}</p>
                                </div>
                            </div>
                            <div class="text-sm space-y-2 text-gray-300">
                                <p><strong>Dev:</strong> {{ selectedGame.Desenvolvedores }}</p>
                                <p><strong>Gêneros:</strong> {{ selectedGame.Gêneros }}</p>
                                <p><strong>Rating:</strong> {{ selectedGame['Classificação indicativa'] || 'Livre' }}</p>
                            </div>
                        </div>

                        <div class="md:col-span-2 space-y-6">
                            <div>
                                <h3 class="text-lg font-bold mb-2 text-blue-300">Sobre o Jogo</h3>
                                <div class="text-gray-300 leading-relaxed text-sm">
                                    {{ selectedGame.Descrição || 'Sem descrição disponível.' }}
                                </div>
                                <a :href="'https://translate.google.com/?sl=en&tl=pt&text=' + encodeURIComponent(selectedGame.Descrição) + '&op=translate'" 
                                   target="_blank" class="text-xs text-blue-500 hover:underline mt-2 inline-block">Traduzir descrição</a>
                            </div>

                            <div class="grid grid-cols-2 sm:grid-cols-3 gap-3">
                                <a :href="getSteamLink(selectedGame)" target="_blank" class="flex items-center p-2 bg-gray-700 rounded hover:bg-blue-900 transition text-xs">
                                    <i class="fab fa-steam mr-2"></i> Steam Store
                                </a>
                                <a :href="'https://howlongtobeat.com/?q=' + encodeURIComponent(selectedGame.Nome)" target="_blank" class="flex items-center p-2 bg-gray-700 rounded hover:bg-orange-800 transition text-xs">
                                    <i class="fas fa-clock mr-2"></i> HLTB
                                </a>
                                <a :href="'https://www.pcgamingwiki.com/w/index.php?search=' + encodeURIComponent(selectedGame.Nome)" target="_blank" class="flex items-center p-2 bg-gray-700 rounded hover:bg-green-800 transition text-xs">
                                    <i class="fas fa-wiki mr-2"></i> PCWiki
                                </a>
                                <a :href="'https://www.youtube.com/results?search_query=' + encodeURIComponent(selectedGame.Nome + ' game launch trailer')" target="_blank" class="flex items-center p-2 bg-gray-700 rounded hover:bg-red-800 transition text-xs">
                                    <i class="fab fa-youtube mr-2"></i> Trailer
                                </a>
                                <a :href="'https://gg.deals/games/?title=' + encodeURIComponent(selectedGame.Nome)" target="_blank" class="flex items-center p-2 bg-gray-700 rounded hover:bg-indigo-800 transition text-xs">
                                    <i class="fas fa-tag mr-2"></i> GG.Deals
                                </a>
                                <a v-if="selectedGame.Fontes === 'Steam'" :href="'https://www.protondb.com/app/' + selectedGame['Id do jogo']" target="_blank" class="flex items-center p-2 bg-gray-700 rounded hover:bg-purple-800 transition text-xs">
                                    <i class="fab fa-linux mr-2"></i> ProtonDB
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </transition>
    </div>

    <script src="games_data.js"></script>
    <script>
        const { createApp, ref, computed } = Vue;

        createApp({
            setup() {
                const games = ref(gamesData);
                const search = ref('');
                const selectedGame = ref(null);
                const expandedStores = ref({ 'Steam': true });

                const groupedGames = computed(() => {
                    return games.value.reduce((acc, game) => {
                        const store = game.Fontes || 'Outros';
                        if (!acc[store]) acc[store] = [];
                        acc[store].push(game);
                        return acc;
                    }, {});
                });

                const filteredGroup = (group) => {
                    if (!search.value) return group;
                    return group.filter(g => g.Nome.toLowerCase().includes(search.value.toLowerCase()));
                };

                const toggleStore = (store) => {
                    expandedStores.value[store] = !expandedStores.value[store];
                };

                const getCover = (game) => {
                    if (game.Fontes === 'Steam' && game['Id do jogo']) {
                        return `https://cdn.akamai.steamstatic.com/steam/apps/${game['Id do jogo']}/library_600x900_2x.jpg`;
                    }
                    return 'https://via.placeholder.com/600x900/1a202c/4a5568?text=' + encodeURIComponent(game.Nome);
                };

                const getBanner = (game) => {
                    if (game.Fontes === 'Steam' && game['Id do jogo']) {
                        return `https://cdn.akamai.steamstatic.com/steam/apps/${game['Id do jogo']}/library_hero.jpg`;
                    }
                    return 'https://via.placeholder.com/1200x400/1a202c/2d3748?text=';
                };

                const getStoreIcon = (store) => {
                    const icons = {
                        'Steam': 'fab fa-steam',
                        'Epic': 'fas fa-bolt',
                        'GOG': 'fas fa-gamepad',
                        'Amazon': 'fab fa-amazon',
                        'Ubisoft Connect': 'fas fa-u',
                        'Ea App': 'fas fa-e'
                    };
                    return icons[store] || 'fas fa-box';
                };

                const getSteamLink = (game) => {
                    return game.Fontes === 'Steam' ? `https://store.steampowered.com/app/${game['Id do jogo']}` : `https://store.steampowered.com/search/?term=${encodeURIComponent(game.Nome)}`;
                };

                const openDetails = (game) => {
                    selectedGame.value = game;
                };

                return {
                    games, search, selectedGame, expandedStores, groupedGames,
                    filteredGroup, toggleStore, getCover, getBanner, getStoreIcon, getSteamLink, openDetails
                };
            }
        }).mount('#app');
    </script>
</body>
</html>